var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);n.prototype=t.prototype,e.prototype=new n},__awaiter=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function s(e){try{u(o.next(e))}catch(t){i(t)}}function a(e){try{u(o["throw"](e))}catch(t){i(t)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}u((o=o.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function n(e){return function(t){return o([e,t])}}function o(n){if(r)throw new TypeError("Generator is already executing.");for(;u;)try{if(r=1,i&&(s=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(i,n[1])).done)return s;switch(i=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,i=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){u.label=n[1];break}if(6===n[0]&&u.label<s[1]){u.label=s[1],s=n;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(n);break}s[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(o){n=[6,o],i=0}finally{r=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var r,i,s,a,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},SQNode=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(eui.Component);__reflect(SQNode.prototype,"SQNode");var HttpActionData=function(){function e(e){this.body={},this.validate(e)}return e.prototype.validate=function(e){throw new Error("需要子类实现")},e}();__reflect(HttpActionData.prototype,"HttpActionData",["IHttpActionData"]);var SQApi=function(){function e(){}return e.prototype.fetchJson=function(e,t,n){var o=this,r=new egret.HttpRequest;r.responseType=egret.HttpResponseType.TEXT,r.open(e.url,egret.HttpMethod.GET),r.setRequestHeader("Accept","application/json"),r.setRequestHeader("Access-Control-Allow-Origin","*");for(var i=0,s=Object.keys(e.header);i<s.length;i++){var a=s[i];r.setRequestHeader(a,e.header[a])}r.send(),r.addEventListener(egret.Event.COMPLETE,function(e){var r=e.currentTarget.response;if(!r)return void n(new SQApiError({message:"HTTP GET response is null"}));var i=JSON.parse(r);i.ok?t(i.result):n(o.getResponseError(i))},this),r.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){n(new SQApiError({message:"无法连接到服务器"}))},this)},e.prototype.postReturnJson=function(e,t,n){var o=this,r=e.url+this.buildParams(e.parameters),i=new egret.HttpRequest;i.responseType=egret.HttpResponseType.TEXT,i.open(r,egret.HttpMethod.POST);for(var s=0,a=Object.keys(e.header);s<a.length;s++){var u=a[s];i.setRequestHeader(u,e.header[u])}if(i.addEventListener(egret.Event.COMPLETE,function(e){var r=e.currentTarget.response;if(!r)return void n(new SQApiError({message:"HTTP POST response is null"}));var i=JSON.parse(r);i.ok?t(i.result):n(o.getResponseError(i))},this),i.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){n(new SQApiError({message:"无法连接到服务器"}))},this),e.body){var c=this.buildBody(e.body);i.send(c)}else i.send()},e.prototype.getResponseError=function(e){if(e.errors){if(e.errors.length<=0)return new SQApiError({message:"服务器请求错误返回格式不对。"});var t=e.errors[0],n=t.message;return t.field&&(n=n+" ("+t.field+")"),new SQApiError({message:n,error_type:e.errors[0].error_type})}return new SQApiError({message:e.message,error_type:e.error_type})},e.prototype.buildParams=function(e){if(!e)return"";var t="?";for(var n in e)n&&(t=t+n+"="+e[n]+"&");return t=t.slice(0,-1)},e.prototype.buildBody=function(e){return JSON.stringify(e)},e}();__reflect(SQApi.prototype,"SQApi");var NoAuthorizedHeaderFactory=function(){function e(e){this.header={Accept:"application/json","Access-Control-Allow-Origin":"*","Content-Type":"application/json"}}return e.prototype.create=function(){return this.header},e}();__reflect(NoAuthorizedHeaderFactory.prototype,"NoAuthorizedHeaderFactory",["IHeaderFactory"]);var SQLayer=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnter=function(){for(var e=this.numChildren,n=0;e>n;n+=1){var o=this.getChildAt(n);o instanceof t&&o.onEnter()}},t.prototype.onExit=function(){for(var e=this.numChildren,n=0;e>n;n+=1){var o=this.getChildAt(n);o instanceof t&&o.onExit()}},t}(SQNode);__reflect(SQLayer.prototype,"SQLayer");var SQScene=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnter=function(){for(var e=this.numChildren,t=0;e>t;t+=1){var n=this.getChildAt(t);n instanceof SQLayer&&n.onEnter()}},t.prototype.onExit=function(){for(var e=this.numChildren,t=0;e>t;t+=1){var n=this.getChildAt(t);n instanceof SQLayer&&n.onExit()}},t}(SQNode);__reflect(SQScene.prototype,"SQScene");var FetchQuestionsData=function(e){function t(t){var n=e.call(this,t)||this;return n.url=SQApiConfig.Host+"/"+SQApiConfig.V1+"/quiz/marathon/"+t.game_id+"/questions",n.headerFactory=new AuthorizedHeaderFactory({access_token:t.access_token}),n.body.user_id=t.user_id,n}return __extends(t,e),t.prototype.validate=function(e){return this.isLegal=!1,e.access_token?e.user_id?void(this.isLegal=!0):void(this.validateMessage="请提供用户id"):void(this.validateMessage="请传入access_token")},t}(HttpActionData);__reflect(FetchQuestionsData.prototype,"FetchQuestionsData");var SQEventCenter=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.sharedInstance=function(){return t.instance||(t.instance=new t),t.instance},t}(egret.EventDispatcher);__reflect(SQEventCenter.prototype,"SQEventCenter");var GameOverScene=function(e){function t(t){var n=e.call(this)||this;return n.skinName="GameOverSceneUI",n.model=t,n.continueButton.addEventListener(egret.TouchEvent.TOUCH_TAP,n.onPressContinueButton,n),n}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.setGameInformations()},t.prototype.setGameInformations=function(){this.answerCorrectInfo.setTitleText("答对题目"),this.answerCorrectInfo.setValueText(String(this.model.getAnswerCorrectAmount())),this.answerWrongInfo.setTitleText("答错题目"),this.answerWrongInfo.setValueText(String(this.model.getAnswerWrongAmount()))},t.prototype.onPressContinueButton=function(){var e=new SQLoadingLayer;e.show(),this.goPlayingScene(e)},t.prototype.joinGame=function(){var e=this,t=new JoinGameData({user_id:UserModel.sharedInstance().attribute.id}),n=new SQLoadingLayer;n.show(),UserModel.sharedInstance().actionModel.joinGame(t,function(t){UserModel.sharedInstance().attribute.setGameId(t.game_id),e.goPlayingScene(n)},function(e){n.hide(),console.log(e)})},t.prototype.goPlayingScene=function(e){var t=this,n=new QuizSceneModel;n.fetchQuestions(function(){e.hide(),SQSceneManager.sharedInstance().removeChildLayer(t),SQSceneManager.sharedInstance().replaceScene(new QuizScene(n))},function(t){console.log(t),e.hide()})},t}(SQScene);__reflect(GameOverScene.prototype,"GameOverScene");var GameOverSceneModel=function(){function e(e){this.answerCorrectAmount=e.answer_correct_amount,this.answerWrongAmount=e.answer_wrong_amount}return e.prototype.getAnswerCorrectAmount=function(){return this.answerCorrectAmount},e.prototype.getAnswerWrongAmount=function(){return this.answerWrongAmount},e}();__reflect(GameOverSceneModel.prototype,"GameOverSceneModel");var GameOverInfoItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="GameOverInfoItemUI",t}return __extends(t,e),t.prototype.setTitleText=function(e){this.titleLabel.text=e},t.prototype.setValueText=function(e){this.valueLabel.text=e},t}(SQLayer);__reflect(GameOverInfoItem.prototype,"GameOverInfoItem");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,n){function o(o){t.call(n,o,e)}if(RES.hasRes(e)){var r=RES.getRes(e);r?o(r):RES.getResAsync(e,o,this)}else RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Main=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){Device.sharedInstance().isPCBrowser()&&(this.stage.orientation=egret.OrientationMode.LANDSCAPE,this.stage.scaleMode=egret.StageScaleMode.SHOW_ALL),egret.lifecycle.addLifecycleListener(function(e){e.onUpdate=function(){}}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(e){console.log(e)})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,this.loadPreloadResourceGroup()];case 1:return t.sent(),this.createLaunchGameScene(),[4,platform.login()];case 2:return t.sent(),[4,platform.getUserInfo()];case 3:return e=t.sent(),console.log(e),[2]}})})},t.prototype.loadPreloadResourceGroup=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),e=new LoadingUI,this.stage.addChild(e),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return n.sent(),[4,this.loadTheme()];case 2:return n.sent(),[4,RES.loadGroup("preload",0,e)];case 3:return n.sent(),this.stage.removeChild(e),[3,5];case 4:return t=n.sent(),console.error(t),[3,5];case 5:return[2]}})})},t.prototype.loadTheme=function(){var e=this;return new Promise(function(t,n){var o=new eui.Theme("resource/default.thm.json",e.stage);o.addEventListener(eui.UIEvent.COMPLETE,function(){t()},e)})},t.prototype.createLaunchGameScene=function(){SQSceneManager.sharedInstance().addRootStage(this),SQSceneManager.sharedInstance().pushScene(new LaunchGameScene)},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,n=RES.getRes(e);return t.texture=n,t},t}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var SQApiConfig=function(){function e(){}return e.Host="https://api.shafayouxi.org",e.V1="v1",e}();__reflect(SQApiConfig.prototype,"SQApiConfig");var SQApiErrorType;!function(e){e[e.None=0]="None",e[e.UserNotFound=1]="UserNotFound"}(SQApiErrorType||(SQApiErrorType={}));var SQApiError=function(e){function t(t){var n=e.call(this)||this;return n.message=t.message,"user_not_found"===t.error_type?n.type=SQApiErrorType.UserNotFound:n.type=SQApiErrorType.None,n}return __extends(t,e),t}(Error);__reflect(SQApiError.prototype,"SQApiError");var HttpPost=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.execute=function(e,t,n){var o={url:e.url,header:e.headerFactory.create(),body:e.body};this.postReturnJson(o,function(e){t(e)},function(e){n(e)})},t}(SQApi);__reflect(HttpPost.prototype,"HttpPost",["IHttpAction"]);var AuthorizedHeaderFactory=function(e){function t(t){var n=e.call(this,t)||this;return t.access_token&&(n.header.Authorization="Bearer "+t.access_token),n}return __extends(t,e),t}(NoAuthorizedHeaderFactory);__reflect(AuthorizedHeaderFactory.prototype,"AuthorizedHeaderFactory");var DebugPlatform=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var LaunchGameScene=function(e){function t(){var t=e.call(this)||this;return t.skinName="LaunchGameSceneUI",t.addNativeMessageListener(),t.queryPlatformInfoFromNative(),t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.addLoadGroupEvent(),this.logoTween.play(0),this.logoTween.addEventListener(egret.Event.COMPLETE,this.logoAnimationComplete,this);var t=AnimationFactory.create("launch_game_animation_json","launch_game_animation_png");this.addChild(t),t.gotoAndPlay("play",-1),RES.loadGroup("answer")},t.prototype.addNativeMessageListener=function(){var e=this;window.document.addEventListener("message",function(t){var n=JSON.parse(t.data);if("query_user_data"===n.command){var o=JSON.parse(n.payload);UserModel.sharedInstance().setAttributes(o),e.joinGame()}else if("query_screen_size"===n.command){var r=n.payload;Device.sharedInstance().setScreenWidth(r.width),Device.sharedInstance().setScreenHeight(r.height)}else"query_platform_name"===n.command&&SQApplication.sharedInstance().setPlatform(n.payload)})},t.prototype.queryDataFromNative=function(){window.postMessage(JSON.stringify({command:"query_user_data"}),"*"),window.postMessage(JSON.stringify({command:"query_screen_size"}),"*")},t.prototype.queryPlatformInfoFromNative=function(){window.postMessage(JSON.stringify({command:"query_platform_name"}),"*")},t.prototype.logoAnimationComplete=function(){this.logoTween.play(0)},t.prototype.addLoadGroupEvent=function(){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onGroupLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onGroupLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onGroupProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this)},t.prototype.removeLoadGroupEvent=function(){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onGroupLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onGroupLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onGroupProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this)},t.prototype.onGroupLoadComplete=function(e){var t=this;this.removeLoadGroupEvent(),setTimeout(function(){if(SQApplication.sharedInstance().isBaseOnReactNative())t.queryDataFromNative();else{var e=SQCookie.getByName("user_id"),n=SQCookie.getByName("user_access_token");e&&n||(e=UUID.generate(),SQCookie.set("user_id",e,7),n=UUID.generate(),SQCookie.set("user_access_token",n,7)),UserModel.sharedInstance().attribute.id=e,UserModel.sharedInstance().attribute.accessToken=n,t.joinGame()}},1e3)},t.prototype.joinGame=function(){var e=this,t=new JoinGameData({user_id:UserModel.sharedInstance().attribute.id});this.descriptionLabel.text="正在加入游戏...",UserModel.sharedInstance().actionModel.joinGame(t,function(t){UserModel.sharedInstance().attribute.setGameId(t.game_id),e.goQuizScene()},function(t){e.joinGame(),console.log(t)})},t.prototype.goQuizScene=function(){var e=this,t=new QuizSceneModel;this.descriptionLabel.text="正在获取数据...",t.fetchQuestions(function(){SQSceneManager.sharedInstance().replaceScene(new QuizScene(t))},function(){e.goQuizScene()})},t.prototype.onGroupLoadError=function(e){console.log("load resource error",e)},t.prototype.onGroupProgress=function(e){this.descriptionLabel.text="资源加载中..."+Math.floor(e.itemsLoaded/e.itemsTotal*100)+"%"},t.prototype.onItemLoadError=function(e){throw new Error(e.resItem.url+"加载失败")},t}(SQScene);__reflect(LaunchGameScene.prototype,"LaunchGameScene");var JoinGameData=function(e){function t(t){var n=e.call(this,t)||this;return n.url=SQApiConfig.Host+"/"+SQApiConfig.V1+"/quiz/marathon/join",n.headerFactory=new NoAuthorizedHeaderFactory({}),n.body.user_id=t.user_id,n}return __extends(t,e),t.prototype.validate=function(e){return this.isLegal=!1,e.access_token?e.user_id?void(this.isLegal=!0):void(this.validateMessage="请提供用户id"):void(this.validateMessage="请传入access_token")},t}(HttpActionData);__reflect(JoinGameData.prototype,"JoinGameData");var QuizScene=function(e){function t(t){var n=e.call(this)||this;return n.skinName="QuizSceneUI",n.model=t,n}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.showQuestion(this.model.getQuestionAtIndex(this.model.currentQuestionAmount)),this.bottomToolbar.setItems(this.model.propsModel.listItems()),this.setupCallbacks()},t.prototype.setupCallbacks=function(){this.navigationBar.pressLeftButtonHandler=this.quitGame.bind(this),this.quizDashboard.quizAnswerLayer.pressAnswerHandler=this.chooseAnswer.bind(this),this.quizDashboard.quizFinishedLayer.pressUpButtonHandler=this.approveQuiz.bind(this),this.quizDashboard.quizFinishedLayer.pressDownButtonHandler=this.disapproveQuiz.bind(this),this.quizDashboard.quizFinishedLayer.postQuestionTagHandler=this.postQuestionTag.bind(this),this.quizDashboard.quizFinishedLayer.pressContinueHandler=this.next.bind(this),this.questionLayer.timesUpHandler=this.timesUp.bind(this),this.bottomToolbar.pressBombPropsHandler=this.useBombProps.bind(this),this.bottomToolbar.pressSkipPropsHandler=this.useSkipProps.bind(this)},t.prototype.fetchQuestions=function(){var e=this,t=new SQLoadingLayer;t.show(),this.model.fetchQuestions(function(n){t.hide(),e.showQuestion(e.model.getQuestionAtIndex(e.model.currentQuestionAmount))},function(e){t.hide()})},t.prototype.showQuestion=function(e){this.questionLayer.setCategory(e.category),this.questionLayer.setQuestionText(e.text),this.questionLayer.startQuizTimer(20),this.questionLayer.setProgressLabel(String(e.index)),this.quizDashboard.quizAnswerLayer.setAnswers(e.answers),this.model.countQuestionById(e.id,function(){console.log("问题计数成功")},function(e){console.log("问题计数失败"+e.message)})},t.prototype.timesUp=function(){this.quizDashboard.quizAnswerLayer.disableAllButtons(),this.questionLayer.showAnswerTimesUpAnimation(),this.model.setAnswerTimeout(!0),this.model.addAnswerWrongAmount(),this.postAnswer("",100)},t.prototype.chooseAnswer=function(e){var t=this;this.questionLayer.stopQuizTimer(function(n){var o=new ButtonStateEvent(ButtonStateEvent.ANSWER_CORRECT);if(SQEventCenter.sharedInstance().dispatchEvent(o),t.model.setCurrentAnswer(e),e.isCorrect)t.questionLayer.showAnswerCorrectAnimation(),t.model.addAnswerCorrectAmount();else{var r=new ButtonStateEvent(ButtonStateEvent.ANSWER_WRONG);SQEventCenter.sharedInstance().dispatchEvent(r),t.questionLayer.showAnswerWrongAnimation(),t.model.addAnswerWrongAmount()}t.postAnswer(e.name,n)})},t.prototype.postAnswer=function(e,t){var n=this,o=this.model.getQuestionAtIndex(this.model.currentQuestionAmount),r={question_id:o.id,answer_text:e,duration_seconds:t};this.model.postAnswer(r,function(){n.showQuizFinishedLayer(o)},function(o){n.postAnswer(e,t),console.log("发送回答失败, 继续尝试")})},t.prototype.showQuizFinishedLayer=function(e){this.quizDashboard.quizFinishedLayer.setQuestion(e),this.dashboardTween.play(0)},t.prototype.quitGame=function(){var e=new SQAlert;e.show("退出答题","确定要退出吗？",[{name:"取消",onPress:function(){console.log("取消")}},{name:"确定",onPress:function(){SQCrossPlatComunication.closeH5Game()}}])},t.prototype.approveQuiz=function(e){var t={action:"up",question_id:e.id,question_token:e.token};this.model.voteQuestionById(t,function(){},function(e){}),this.delayCallNext()},t.prototype.disapproveQuiz=function(e){var t={action:"down",question_id:e.id,question_token:e.token};this.model.voteQuestionById(t,function(){},function(e){}),this.delayCallNext()},t.prototype.postQuestionTag=function(e,t){var n={question_id:e.id,tag:t.name};this.model.postQuestionTag(n,function(e){console.log("postQuestionTags success #####",e)},function(e){console.log("postQuestionTags failed #####",e.message)}),this.delayCallNext()},t.prototype.delayCallNext=function(){var e=this;setTimeout(function(){e.next()},1e3)},t.prototype.next=function(){this.model.currentQuestionAmount+=1;var e=new ButtonStateEvent(ButtonStateEvent.ANSWER_RESET);return SQEventCenter.sharedInstance().dispatchEvent(e),this.quizDashboard.x=0,this.model.currentQuestionAmount===this.model.totalQuestionAmount?(this.model.reset(),void SQSceneManager.sharedInstance().addChildLayer(new GameOverScene(this.createGameOverModel()))):void this.showQuestion(this.model.getQuestionAtIndex(this.model.currentQuestionAmount))},t.prototype.createGameOverModel=function(){var e={answer_correct_amount:this.model.getAnswerCorrectAmount(),answer_wrong_amount:this.model.getAnswerWrongAmount()};return new GameOverSceneModel(e)},t.prototype.useBombProps=function(e){this.model.propsModel.isUsed()||(this.model.propsModel.useProps(e),this.quizDashboard.quizAnswerLayer.deleteTwoWrongAnswers())},t.prototype.useSkipProps=function(e){if(!this.model.propsModel.isUsed()){this.model.propsModel.useProps(e);var t=this.model.getQuestionAtIndex(this.model.currentQuestionAmount);this.chooseAnswer(t.getCorrectAnswer())}},t}(SQScene);__reflect(QuizScene.prototype,"QuizScene");var Answer=function(){function e(e){this.name=e.name,this.isCorrect=e.correct,this.index=e.index}return e}();__reflect(Answer.prototype,"Answer");var Question=function(){function e(e){this.category=e.category,this.id=e.id,this.language=e.language,this.index=e.index,this.text=e.text,this.token=e.question_token,this.answers=this.createAnswers(e.options)}return e.prototype.getCorrectAnswer=function(){for(var e=0;e<this.answers.length;e+=1){var t=this.answers[e];if(t.isCorrect)return t}},e.prototype.createAnswers=function(e){return e.map(function(e){return new Answer(e)})},e}();__reflect(Question.prototype,"Question");var QuizSceneModel=function(){function e(){this.currentQuestionAmount=0,this.httpPost=new HttpPost,this.propsModel=new QuizPropsModel,this.createProps(),this.answerCorrectAmount=0,this.answerWrongAmount=0}return e.prototype.setCurrentAnswer=function(e){this.currentAnswer=e},e.prototype.getCurrentAnswer=function(){return this.currentAnswer},e.prototype.addAnswerCorrectAmount=function(){this.answerCorrectAmount+=1},e.prototype.getAnswerCorrectAmount=function(){return this.answerCorrectAmount},e.prototype.addAnswerWrongAmount=function(){this.answerWrongAmount+=1},e.prototype.getAnswerWrongAmount=function(){return this.answerWrongAmount},e.prototype.setAnswerTimeout=function(e){this.isAnswerTimeout=e},e.prototype.getAnswerTimeout=function(){return this.isAnswerTimeout},e.prototype.reset=function(){this.currentQuestionAmount=0,this.questions=[],this.isAnswerTimeout=!1,this.propsModel.reset()},e.prototype.getQuestionAtIndex=function(e){return this.questions.length<=e?void 0:this.questions[e]},e.prototype.fetchQuestions=function(e,t){var n=this,o=new FetchQuestionsData({game_id:UserModel.sharedInstance().attribute.getGameId(),access_token:UserModel.sharedInstance().attribute.accessToken,user_id:UserModel.sharedInstance().attribute.id});this.httpPost.execute(o,function(t){n.questions=n.createQuestions(t.questions),n.totalQuestionAmount=n.questions.length,e(n.questions)},function(e){t(e)})},e.prototype.postAnswer=function(e,t,n){var o=new PostAnswerData({game_id:UserModel.sharedInstance().attribute.getGameId(),user_id:UserModel.sharedInstance().attribute.id,question_id:e.question_id,duration_seconds:e.duration_seconds,answer:e.answer_text});this.httpPost.execute(o,function(e){t()},function(e){n(e)})},e.prototype.countQuestionById=function(e,t,n){var o=new CountQuestionData({user_id:UserModel.sharedInstance().attribute.id,question_id:e});this.httpPost.execute(o,function(e){t()},function(e){n(e)})},e.prototype.voteQuestionById=function(e,t,n){var o=new VoteQuestionData({user_id:UserModel.sharedInstance().attribute.id,token:e.question_token,question_id:e.question_id,action:e.action});this.httpPost.execute(o,function(e){t(e)},function(e){n(e)})},e.prototype.postQuestionTag=function(e,t,n){var o=new PostTagData({user_id:UserModel.sharedInstance().attribute.id,question_id:e.question_id,tag:e.tag});this.httpPost.execute(o,function(e){t(e)},function(e){n(e)})},e.prototype.createQuestions=function(e){return e.map(function(e){return new Question(e)})},e.prototype.createProps=function(){var e=propsDatas.map(function(e){var t=new QuizPropsItem;return t.setName(e.name),t.setImage(e.image),t.setDescription(e.description),t});this.propsModel.setItems(e)},e}();__reflect(QuizSceneModel.prototype,"QuizSceneModel");var propsDatas=[{image:"img_bomb@2x_png",name:"炸弹",description:"去掉两个错误答案"},{image:"img_jump_over@2x_png",name:"跳过",description:"跳过这一题"}],tagDatas=[{title:"你可以告诉我们问题难度吗？",content:{up:{name:"太简单"},down:{name:"太难了"}}},{title:"你觉得这个问题怎么样？",content:{up:{name:"很有趣"},down:{name:"很无聊"}}},{title:"你有发现答案错误吗？",content:{up:{name:"答案准确"},down:{name:"答案有误"}}},{title:"评价一下这个题型吧？",content:{up:{name:"题型有趣"},down:{name:"题型无聊"}}},{title:"你擅长这种类别题目吗？",content:{up:{name:"擅长"},down:{name:"不擅长"}}},{title:"这个题目小众还是大众，二选一",content:{up:{name:"小众"},down:{name:"大众"}}}],QuizTagType;!function(e){e[e.None=0]="None",e[e.Thumbs=1]="Thumbs",e[e.Tags=2]="Tags"}(QuizTagType||(QuizTagType={}));var QuizTagTypeData=[QuizTagType.None,QuizTagType.None,QuizTagType.None,QuizTagType.None,QuizTagType.None,QuizTagType.Thumbs,QuizTagType.Thumbs,QuizTagType.Tags,QuizTagType.Tags,QuizTagType.Tags],QuizTagModel=function(){function e(){}return e.prototype.randomTagType=function(){return QuizTagTypeData[SQMath.randomInt(QuizTagTypeData.length)]},e.prototype.getRandomTagOption=function(){var e=tagDatas[SQMath.randomInt(tagDatas.length)];return this.randomTagOption=new TagOption(e),this.randomTagOption},e.prototype.getLeftTag=function(){return this.randomTagOption.tags[0]},e.prototype.getRightTag=function(){return this.randomTagOption.tags[1]},e}();__reflect(QuizTagModel.prototype,"QuizTagModel");var TagOption=function(){function e(e){this.title=e.title,this.tags=this.createTags(e.content)}return e.prototype.createTags=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(new Tag(e[n]));return t},e}();__reflect(TagOption.prototype,"TagOption");var Tag=function(){function e(e){this.name=e.name,this.selected=!1}return e}();__reflect(Tag.prototype,"Tag");var QuizPropsItem=function(){function e(){}return e.prototype.setName=function(e){this.name=e},e.prototype.getName=function(){return this.name},e.prototype.setImage=function(e){this.image=e},e.prototype.getImage=function(){return this.image},e.prototype.setDescription=function(e){this.description=e},e.prototype.getDescription=function(){return this.description},e}();__reflect(QuizPropsItem.prototype,"QuizPropsItem",["IGamePropsItem"]);var QuizPropsModel=function(){function e(){}return e.prototype.setItems=function(e){this.items=e},e.prototype.listItems=function(){return this.items},e.prototype.useProps=function(e){this.usedPropsItem=e},e.prototype.isUsed=function(){return this.usedPropsItem?!0:!1},e.prototype.reset=function(){this.usedPropsItem=void 0},e}();__reflect(QuizPropsModel.prototype,"QuizPropsModel",["IGameProps"]);var CountQuestionData=function(e){function t(t){var n=e.call(this,t)||this;return n.url=SQApiConfig.Host+"/"+SQApiConfig.V1+"/count/"+t.question_id,n.headerFactory=new NoAuthorizedHeaderFactory({}),n.body.user_id=t.user_id,n}return __extends(t,e),t.prototype.validate=function(e){return this.isLegal=!1,e.user_id?void(this.isLegal=!0):void(this.validateMessage="没有找到用户id")},t}(HttpActionData);__reflect(CountQuestionData.prototype,"CountQuestionData");var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.onProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var PostAnswerData=function(e){function t(t){var n=e.call(this,t)||this;return n.url=SQApiConfig.Host+"/"+SQApiConfig.V1+"/quiz/marathon/"+t.game_id+"/answer",n.headerFactory=new AuthorizedHeaderFactory({access_token:t.access_token}),n.body.user_id=t.user_id,n.body.question_id=t.question_id,n.body.quiz_token=t.quiz_token,n.body.duration_seconds=t.duration_seconds,n.body.answer=t.answer,n}return __extends(t,e),t.prototype.validate=function(e){this.isLegal=!0},t}(HttpActionData);__reflect(PostAnswerData.prototype,"PostAnswerData");var PostTagData=function(e){function t(t){var n=e.call(this,t)||this;return n.url=SQApiConfig.Host+"/"+SQApiConfig.V1+"/tag/"+t.question_id,n.headerFactory=new AuthorizedHeaderFactory({access_token:t.access_token}),n.body.user_id=t.user_id,n.body.tag=t.tag,n}return __extends(t,e),t.prototype.validate=function(e){return this.isLegal=!1,e.user_id?e.tag?void(this.isLegal=!0):void(this.validateMessage="请提供tag"):void(this.validateMessage="请提供用户的id")},t}(HttpActionData);__reflect(PostTagData.prototype,"PostTagData");var VoteQuestionData=function(e){function t(t){var n=e.call(this,t)||this;return n.url=SQApiConfig.Host+"/"+SQApiConfig.V1+"/vote/"+t.question_id,n.headerFactory=new NoAuthorizedHeaderFactory({}),n.body.user_id=t.user_id,n.body.action=t.action,n.body.token=t.token,console.log(t),n}return __extends(t,e),t.prototype.validate=function(e){return this.isLegal=!0,e.user_id?e.action?e.token?e.question_id?void(this.validateMessage="请提供问题id"):void(this.isLegal=!0):void(this.validateMessage="请提供有效问题token"):void(this.validateMessage="没有提供投票行为"):void(this.validateMessage="没有可用用户id")},t}(HttpActionData);__reflect(VoteQuestionData.prototype,"VoteQuestionData");var QuestionLayer=function(e){function t(){var t=e.call(this)||this;return t.skinName="QuestionLayerUI",t}return __extends(t,e),t.prototype.showAnswerTimesUpAnimation=function(){var e=this,t=AnimationFactory.create("answer_times_up_animation_json","answer_times_up_animation_png");this.animationContainer.addChild(t),this.animationContainer.layout=this.createAnimationContainerLayout(),t.gotoAndPlay("play",0),t.addEventListener(egret.MovieClipEvent.COMPLETE,function(){e.animationContainer.removeChild(t)},this)},t.prototype.showAnswerCorrectAnimation=function(){var e=this,t=AnimationFactory.create("answer_correct_animation_json","answer_correct_animation_png");this.animationContainer.addChild(t),this.animationContainer.layout=this.createAnimationContainerLayout(),t.gotoAndPlay("play",0),t.addEventListener(egret.MovieClipEvent.COMPLETE,function(){e.animationContainer.removeChild(t)},this)},t.prototype.showAnswerWrongAnimation=function(){var e=this,t=AnimationFactory.create("answer_wrong_animation_json","answer_wrong_animation_png");this.animationContainer.addChild(t),this.animationContainer.layout=this.createAnimationContainerLayout(),t.gotoAndPlay("play",0),t.addEventListener(egret.MovieClipEvent.COMPLETE,function(){e.animationContainer.removeChild(t)},this)},t.prototype.createAnimationContainerLayout=function(){var e=new eui.HorizontalLayout;return e.gap=0,e.horizontalAlign=egret.HorizontalAlign.CENTER,e.verticalAlign=egret.VerticalAlign.MIDDLE,e},t.prototype.setCategory=function(e){this.categoryLabel.text=e},t.prototype.setProgressLabel=function(e){this.progressLabel.text=e},t.prototype.startQuizTimer=function(e){this.timer||(this.initialTime=e,this.remainTime=e,this.timer=new egret.Timer(1e3,e),this.timer.addEventListener(egret.TimerEvent.TIMER,this.timerCalled,this),this.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.timerCompleted,this),this.timeLabel.text=e+'"',this.timer.start())},t.prototype.stopQuizTimer=function(e){this.stopTimer(),e(this.initialTime-this.remainTime)},t.prototype.setQuestionText=function(e){this.questionLabel.text=e},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.animationContainer=new eui.Group,this.animationContainer.width=this.width,this.animationContainer.height=this.height,this.animationContainer.y=-140,this.addChild(this.animationContainer)},t.prototype.stopTimer=function(){this.timer&&(this.timer.stop(),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.timerCalled,this),this.timer.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.timerCompleted,this),this.timer=void 0)
},t.prototype.timerCalled=function(){this.remainTime-=1,this.timeLabel.text=this.remainTime+'"'},t.prototype.timerCompleted=function(){this.stopTimer(),this.timesUpHandler()},t}(SQLayer);__reflect(QuestionLayer.prototype,"QuestionLayer");var QuizAnswerButton=function(e){function t(){var t=e.call(this)||this;return t.skinName="QuizAnswerButtonUI",t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.onTapBegin,t),t.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,t.onTapReleaseOutside,t),t.addEventListener(egret.TouchEvent.TOUCH_END,t.onTappEnd,t),t.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onTapped,t),SQEventCenter.sharedInstance().addEventListener(ButtonStateEvent.ANSWER_RESET,t.reset,t),t}return __extends(t,e),t.prototype.setAnswer=function(e){this.answer=e,this.setTitle(e.name),SQEventCenter.sharedInstance().removeEventListener(ButtonStateEvent.ANSWER_CORRECT,this.showCorrectState,this),SQEventCenter.sharedInstance().addEventListener(ButtonStateEvent.ANSWER_CORRECT,this.showCorrectState,this)},t.prototype.deleteAsWrongAnswer=function(){this.cover.visible=!0,this.enabled=!1},t.prototype.showCorrectState=function(){this.answer.isCorrect&&(this.currentState="correct")},t.prototype.showWrongState=function(){this.currentState="wrong"},t.prototype.reset=function(){this.currentState="up",this.cover.visible=!1,SQEventCenter.sharedInstance().removeEventListener(ButtonStateEvent.ANSWER_WRONG,this.showWrongState,this)},t.prototype.setTitle=function(e){this.titleLabel.text=e},t.prototype.onTapped=function(){SQEventCenter.sharedInstance().addEventListener(ButtonStateEvent.ANSWER_WRONG,this.showWrongState,this)},t.prototype.onTapBegin=function(){this.titleLabel.visible=!1},t.prototype.onTapReleaseOutside=function(){this.titleLabel.visible=!0},t.prototype.onTappEnd=function(){this.titleLabel.visible=!0},t}(eui.Button);__reflect(QuizAnswerButton.prototype,"QuizAnswerButton");var QuizAnswerLayer=function(e){function t(){var t=e.call(this)||this;return t.skinName="QuizAnswerLayerUI",t.answerButtons=[],t.answerOne.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPressAnswerOne,t),t.answerButtons.push(t.answerOne),t.answerTwo.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPressAnswerTwo,t),t.answerButtons.push(t.answerTwo),t.answerThree.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPressAnswerThree,t),t.answerButtons.push(t.answerThree),t.answerFour.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPressAnswerFour,t),t.answerButtons.push(t.answerFour),t}return __extends(t,e),t.prototype.deleteTwoWrongAnswers=function(){for(var e=0,t=0;t<this.answers.length;t+=1){var n=this.answers[t];if(n.isCorrect||(this.answerButtons[t].deleteAsWrongAnswer(),e+=1),e>=2)break}},t.prototype.setAnswers=function(e){this.answers=e,this.enableAllButtons(),this.answerOne.setAnswer(e[0]),this.answerTwo.setAnswer(e[1]),this.answerThree.setAnswer(e[2]),this.answerFour.setAnswer(e[3])},t.prototype.disableAllButtons=function(){this.answerOne.enabled=!1,this.answerTwo.enabled=!1,this.answerThree.enabled=!1,this.answerFour.enabled=!1},t.prototype.onPressAnswerOne=function(){this.disableAllButtons(),this.pressAnswerHandler&&this.pressAnswerHandler(this.answers[0])},t.prototype.onPressAnswerTwo=function(){this.disableAllButtons(),this.pressAnswerHandler&&this.pressAnswerHandler(this.answers[1])},t.prototype.onPressAnswerThree=function(){this.disableAllButtons(),this.pressAnswerHandler&&this.pressAnswerHandler(this.answers[2])},t.prototype.onPressAnswerFour=function(){this.disableAllButtons(),this.pressAnswerHandler&&this.pressAnswerHandler(this.answers[3])},t.prototype.enableAllButtons=function(){this.answerOne.enabled=!0,this.answerTwo.enabled=!0,this.answerThree.enabled=!0,this.answerFour.enabled=!0},t}(SQLayer);__reflect(QuizAnswerLayer.prototype,"QuizAnswerLayer");var QuizDashboardLayer=function(e){function t(){var t=e.call(this)||this;return t.skinName="QuizDashboardUI",t}return __extends(t,e),t}(SQLayer);__reflect(QuizDashboardLayer.prototype,"QuizDashboardLayer");var QuizFinishedLayer=function(e){function t(){var t=e.call(this)||this;return t.skinName="QuizFinishedLayerUI",t.upButton.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPressUpButton,t),t.downButton.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPressDownButton,t),t.leftTagButton.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPressLeftTagButton,t),t.rightTagButton.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPressRightTagButton,t),t.continueButton.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPressContinueButton,t),t.tagModel=new QuizTagModel,t}return __extends(t,e),t.prototype.setQuestion=function(e){var t=this.tagModel.randomTagType();if(this.enableAllButtons(!0),t===QuizTagType.None)this.thumbsGroup.visible=!1,this.tagsGroup.visible=!1;else if(t===QuizTagType.Tags){this.thumbsGroup.visible=!1;var n=this.tagModel.getRandomTagOption();this.leftTagButton.labelDisplay.text=n.tags[0].name,this.rightTagButton.labelDisplay.text=n.tags[1].name,this.tagTitleLabel.text=n.title,this.tagsGroup.visible=!0}else t===QuizTagType.Thumbs&&(this.thumbsGroup.visible=!0,this.tagsGroup.visible=!1);this.question=e},t.prototype.enableAllButtons=function(e){this.upButton.enabled=e,this.downButton.enabled=e,this.leftTagButton.enabled=e,this.rightTagButton.enabled=e,this.continueButton.enabled=e},t.prototype.onPressUpButton=function(){this.enableAllButtons(!1),this.pressUpButtonHandler(this.question)},t.prototype.onPressDownButton=function(){this.enableAllButtons(!1),this.pressDownButtonHandler(this.question)},t.prototype.onPressContinueButton=function(){this.enableAllButtons(!1),this.reset(),this.pressContinueHandler&&this.pressContinueHandler()},t.prototype.onPressLeftTagButton=function(){this.enableAllButtons(!1),this.postQuestionTagHandler(this.question,this.tagModel.getLeftTag())},t.prototype.onPressRightTagButton=function(){this.enableAllButtons(!1),this.postQuestionTagHandler(this.question,this.tagModel.getRightTag())},t.prototype.reset=function(){this.upButton.selected=!1,this.downButton.selected=!1},t}(SQLayer);__reflect(QuizFinishedLayer.prototype,"QuizFinishedLayer");var QuizSceneBottomToolbar=function(e){function t(){var t=e.call(this)||this;return t.skinName="QuizSceneBottomToolbarUI",t.bombButton.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPressBombButton,t),t.skipButton.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPressSkipButton,t),t}return __extends(t,e),t.prototype.setItems=function(e){e.length&&0!==e.length&&(this.bombProps=e[0],this.bombButton.setIcon(this.bombProps.getImage()),this.bombButton.setTitle(this.bombProps.getName()),this.bombButton.setDescription(this.bombProps.getDescription()),this.skipProps=e[1],this.skipButton.setIcon(this.skipProps.getImage()),this.skipButton.setTitle(this.skipProps.getName()),this.skipButton.setDescription(this.skipProps.getDescription()))},t.prototype.onPressBombButton=function(){this.pressBombPropsHandler(this.bombProps)},t.prototype.onPressChanceButton=function(){},t.prototype.onPressSkipButton=function(){this.pressSkipPropsHandler(this.skipProps)},t}(SQLayer);__reflect(QuizSceneBottomToolbar.prototype,"QuizSceneBottomToolbar");var QuizSceneBottomToolbarItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="QuizSceneBottomToolbarItemUI",t}return __extends(t,e),t.prototype.setIcon=function(e){this.icon.source=e},t.prototype.setTitle=function(e){this.titleLabel.text=e},t.prototype.setDescription=function(e){this.descriptionLabel.text=e},t}(SQLayer);__reflect(QuizSceneBottomToolbarItem.prototype,"QuizSceneBottomToolbarItem");var UserAttribute=function(){function e(){}return e.prototype.setGameId=function(e){this.gameId=e},e.prototype.getGameId=function(){return this.gameId},e}();__reflect(UserAttribute.prototype,"UserAttribute",["IAttribute"]);var UserModel=function(){function e(){this.attribute=new UserAttribute,this.actionModel=new UserActionModel}return e.sharedInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.setAttributes=function(e){this.attribute.id=e.user.id,this.attribute.accessToken=e.auth.access_token},e}();__reflect(UserModel.prototype,"UserModel");var UserActionModel=function(){function e(){this.httpPost=new HttpPost}return e.prototype.joinGame=function(e,t,n){this.httpPost.execute(e,t,n)},e}();__reflect(UserActionModel.prototype,"UserActionModel",["IUserAction"]);var AnimationFactory=function(){function e(){}return e.create=function(e,t){var n=RES.getRes(e),o=RES.getRes(t),r=new egret.MovieClipDataFactory(n,o);return new egret.MovieClip(r.generateMovieClipData("animation"))},e}();__reflect(AnimationFactory.prototype,"AnimationFactory");var Device=function(){function e(){}return e.sharedInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.setScreenWidth=function(e){this.screenWidth=e},e.prototype.setScreenHeight=function(e){this.screenHeight=e},e.prototype.isPCBrowser=function(){var e=!0;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!1)}(navigator.userAgent||navigator.vendor),e},e}();__reflect(Device.prototype,"Device");var SQApplication=function(){function e(){}return e.sharedInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.setPlatform=function(e){this.platform=e},e.prototype.getPlatform=function(){return this.platform},e.prototype.isBaseOnReactNative=function(){return"react_native"===this.platform},e}();__reflect(SQApplication.prototype,"SQApplication");var SQCookie=function(){function e(){}return e.set=function(e,t,n){var o="";if(n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3),o="; expires="+r.toUTCString()}window.document.cookie=e+"="+(t||"")+o+"; path=/"},e.getByName=function(e){for(var t=e+"=",n=window.document.cookie.split(";"),o=0,r=n.length;r>o;o+=1){for(var i=n[o];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return""},e.eraseCookie=function(e){window.document.cookie=e+"=; Max-Age=-99999999;"},e}();__reflect(SQCookie.prototype,"SQCookie");var SQCrossPlatComunication=function(){function e(){}return e.closeH5Game=function(){SQApplication.sharedInstance().isBaseOnReactNative()&&window.postMessage(JSON.stringify({command:"close_webview"}),"*")},e}();__reflect(SQCrossPlatComunication.prototype,"SQCrossPlatComunication");var SQMath=function(){function e(){}return e.randomInt=function(e){return Math.floor(Math.random()*Math.floor(e))},e}();__reflect(SQMath.prototype,"SQMath");var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,n,o){function r(e){t.call(o,e)}function i(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),n.call(o))}var s=this;"undefined"!=typeof generateEUI?egret.callLater(function(){t.call(o,generateEUI)},this):"undefined"!=typeof generateEUI2?RES.getResByUrl("resource/gameEui.json",function(e,n){window.JSONParseClass.setData(e),egret.callLater(function(){t.call(o,generateEUI2)},s)},this,RES.ResourceItem.TYPE_JSON):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),RES.getResByUrl(e,r,this,RES.ResourceItem.TYPE_TEXT))},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var ButtonStateEvent=function(e){function t(t,n,o){return void 0===n&&(n=!1),void 0===o&&(o=!1),e.call(this,t,n,o)||this}return __extends(t,e),t.ANSWER_CORRECT="event.button.state.answer.correct",t.ANSWER_WRONG="event.button.state.answer.wrong",t.ANSWER_RESET="event.button.state.answer.reset",t}(egret.Event);__reflect(ButtonStateEvent.prototype,"ButtonStateEvent");var SQPopupLayer=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(SQLayer);__reflect(SQPopupLayer.prototype,"SQPopupLayer");var ListItemEvent=function(e){function t(t,n,o){return void 0===n&&(n=!1),void 0===o&&(o=!1),e.call(this,t,n,o)||this}return __extends(t,e),t.ITEM_TAPPED="list.item.tapped.event",t}(egret.Event);__reflect(ListItemEvent.prototype,"ListItemEvent");var SQSceneManager=function(e){function t(){var t=e.call(this)||this;return t.sceneStack=new eui.ViewStack,t.scenes=[],t}return __extends(t,e),t.sharedInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.addRootStage=function(e){this.rootStage=e,this.rootStage.addChild(this.sceneStack)},t.prototype.addChildLayer=function(e){if(!e)throw new Error("无法添加不存在的layer");this.rootStage.addChild(e),e.onEnter()},t.prototype.removeChildLayer=function(e){if(!e)throw new Error("无法移出不存在的scene");e.parent&&(e.onExit(),this.rootStage.removeChild(e),e=void 0)},t.prototype.pushScene=function(e){if(!e)throw new Error("你不能push一个不存在的scene");this.sceneStack.addChild(e),e.onEnter(),this.scenes.push(e),this.sceneStack.selectedIndex=this.sceneStack.length-1},t.prototype.popScene=function(){if(1<=this.scenes.length){var e=this.scenes.pop();e.onExit();var t=this.sceneStack.removeChild(e);this.sceneStack.selectedIndex=this.sceneStack.length-1,this.sceneStack.selectedIndex<0&&(this.sceneStack.selectedIndex=0),t=void 0}},t.prototype.replaceScene=function(e){if(!e)throw new Error("你不能replace一个不存在的scene");this.popScene(),this.pushScene(e)},t.instance=void 0,t}(egret.DisplayObjectContainer);__reflect(SQSceneManager.prototype,"SQSceneManager");var NavigationBar=function(e){function t(){var t=e.call(this)||this;return t.skinName="NavigationBarUI",t.leftButton.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPressLeftButton,t),t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),SQApplication.sharedInstance().isBaseOnReactNative()||(this.leftButton.visible=!1)},t.prototype.onPressLeftButton=function(){this.pressLeftButtonHandler&&this.pressLeftButtonHandler()},t}(SQLayer);__reflect(NavigationBar.prototype,"NavigationBar");var PureTextButton=function(e){function t(){var t=e.call(this)||this;return t.skinName="PureTextButtonUI",t}return __extends(t,e),t}(SQLayer);__reflect(PureTextButton.prototype,"PureTextButton");var SQAlert=function(e){function t(){var t=e.call(this)||this;return t.skinName="SQAlertUI",t}return __extends(t,e),t.prototype.show=function(e,t,n){var o=this;e&&(this.titleLabel.text=e),t&&(this.messageLabel.text=t),n&&n.forEach(function(e){var t=new SQAlertButton;t.setTitle(e.name),"确定"===e.name&&t.setBackgroundColor(13912907),t.setCallback(function(){e.onPress(),SQSceneManager.sharedInstance().removeChildLayer(o)}),o.buttonsGroup.addChild(t)}),SQSceneManager.sharedInstance().addChildLayer(this)},t}(SQLayer);__reflect(SQAlert.prototype,"SQAlert");var SQAlertButton=function(e){function t(){var t=e.call(this)||this;return t.skinName="SQAlertButtonUI",t}return __extends(t,e),t.prototype.setTitle=function(e){this.titleLabel.text=e},t.prototype.setBackgroundColor=function(e){this.background.fillColor=e},t.prototype.setCallback=function(e){this.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e()},this)},t}(SQLayer);__reflect(SQAlertButton.prototype,"SQAlertButton");var SQLoadingLayer=function(e){function t(){var t=e.call(this)||this;t.skinName="LoadingLayerUI";var n=RES.getRes("loading_animation_json"),o=RES.getRes("loading_animation_png"),r=new egret.MovieClipDataFactory(n,o);return t.loadingAnimation=new egret.MovieClip(r.generateMovieClipData("loading_animation")),t.addChild(t.loadingAnimation),t.loadingAnimation.x=(t.width-t.loadingAnimation.width)/2,t.loadingAnimation.y=(t.height-t.loadingAnimation.height)/2,t.loadingAnimation.addEventListener(egret.MovieClipEvent.COMPLETE,function(){t.loadingAnimation.gotoAndPlay("play",0)},t),t}return __extends(t,e),t.prototype.show=function(){this.loadingAnimation.gotoAndPlay("play",0),SQSceneManager.sharedInstance().addChildLayer(this)},t.prototype.hide=function(){this.loadingAnimation.gotoAndStop(0),this.removeChild(this.loadingAnimation),this.loadingAnimation=void 0,SQSceneManager.sharedInstance().removeChildLayer(this)},t}(SQLayer);__reflect(SQLoadingLayer.prototype,"SQLoadingLayer");var TransparentLayer=function(e){function t(){var t=e.call(this)||this;return t.skinName="TransparentLayerUI",t}return __extends(t,e),t}(SQLayer);__reflect(TransparentLayer.prototype,"TransparentLayer");