var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},__awaiter=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function s(e){try{u(r.next(e))}catch(t){i(t)}}function a(e){try{u(r["throw"](e))}catch(t){i(t)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}u((r=r.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(s=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(i,n[1])).done)return s;switch(i=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,i=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(s=u.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){u.label=n[1];break}if(6===n[0]&&u.label<s[1]){u.label=s[1],s=n;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(n);break}s[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(r){n=[6,r],i=0}finally{o=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,i,s,a,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},HttpActionData=function(){function e(e){this.body={},this.validate(e)}return e.prototype.validate=function(e){throw new Error("需要子类实现")},e}();__reflect(HttpActionData.prototype,"HttpActionData",["IHttpActionData"]);var SQApi=function(){function e(){}return e.prototype.fetchJson=function(e,t,n){var r=this,o=new egret.HttpRequest;o.responseType=egret.HttpResponseType.TEXT,o.open(e.url,egret.HttpMethod.GET),o.setRequestHeader("Accept","application/json"),o.setRequestHeader("Access-Control-Allow-Origin","*");for(var i=0,s=Object.keys(e.header);i<s.length;i++){var a=s[i];o.setRequestHeader(a,e.header[a])}o.send(),o.addEventListener(egret.Event.COMPLETE,function(e){var o=e.currentTarget.response;if(!o)return void n(new SQApiError({message:"HTTP GET response is null"}));var i=JSON.parse(o);i.ok?t(i.result):n(r.getResponseError(i))},this),o.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){n(new SQApiError({message:"无法连接到服务器"}))},this)},e.prototype.postReturnJson=function(e,t,n){var r=this,o=e.url+this.buildParams(e.parameters),i=new egret.HttpRequest;i.responseType=egret.HttpResponseType.TEXT,i.open(o,egret.HttpMethod.POST);for(var s=0,a=Object.keys(e.header);s<a.length;s++){var u=a[s];i.setRequestHeader(u,e.header[u])}if(i.addEventListener(egret.Event.COMPLETE,function(e){var o=e.currentTarget.response;if(!o)return void n(new SQApiError({message:"HTTP POST response is null"}));var i=JSON.parse(o);i.ok?t(i.result):n(r.getResponseError(i))},this),i.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){n(new SQApiError({message:"无法连接到服务器"}))},this),e.body){var c=this.buildBody(e.body);i.send(c)}else i.send()},e.prototype.getResponseError=function(e){if(e.errors){if(e.errors.length<=0)return new SQApiError({message:"服务器请求错误返回格式不对。"});var t=e.errors[0],n=t.message;return t.field&&(n=n+" ("+t.field+")"),new SQApiError({message:n,error_type:e.errors[0].error_type})}return new SQApiError({message:e.message,error_type:e.error_type})},e.prototype.buildParams=function(e){if(!e)return"";var t="?";for(var n in e)n&&(t=t+n+"="+e[n]+"&");return t=t.slice(0,-1)},e.prototype.buildBody=function(e){return JSON.stringify(e)},e}();__reflect(SQApi.prototype,"SQApi");var NoAuthorizedHeaderFactory=function(){function e(e){this.header={Accept:"application/json","Access-Control-Allow-Origin":"*","Content-Type":"application/json"}}return e.prototype.create=function(){return this.header},e}();__reflect(NoAuthorizedHeaderFactory.prototype,"NoAuthorizedHeaderFactory",["IHeaderFactory"]);var SQLayer=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnter=function(){for(var e=this.numChildren,n=0;e>n;n+=1){var r=this.getChildAt(n);r instanceof t&&r.onEnter()}},t.prototype.onExit=function(){for(var e=this.numChildren,n=0;e>n;n+=1){var r=this.getChildAt(n);r instanceof t&&r.onExit()}},t}(eui.Component);__reflect(SQLayer.prototype,"SQLayer");var SQScene=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnter=function(){for(var e=this.numChildren,t=0;e>t;t+=1){var n=this.getChildAt(t);n instanceof SQLayer&&n.onEnter()}},t.prototype.onExit=function(){for(var e=this.numChildren,t=0;e>t;t+=1){var n=this.getChildAt(t);n instanceof SQLayer&&n.onExit()}},t}(eui.Component);__reflect(SQScene.prototype,"SQScene");var QuizSceneModel=function(){function e(){this.currentQuestionAmount=0,this.httpPost=new HttpPost}return e.prototype.reset=function(){this.currentQuestionAmount=0,this.questions=[]},e.prototype.getQuestionAtIndex=function(e){return this.questions.length<=e?void 0:this.questions[e]},e.prototype.fetchQuestions=function(e,t){var n=this,r=new FetchQuestionsData({access_token:UserModel.sharedInstance().attribute.token,user_id:UserModel.sharedInstance().attribute.id});this.httpPost.execute(r,function(t){n.questions=n.createQuestions(t.questions),n.totalQuestionAmount=n.questions.length,e(n.questions)},function(e){t(e)})},e.prototype.postAnswer=function(e,t,n){var r=new PostAnswerData({user_id:UserModel.sharedInstance().attribute.id,quiz_token:UserModel.sharedInstance().attribute.quizToken,question_id:e.question_id,duration_seconds:e.duration_seconds,answer:e.answer_text});this.httpPost.execute(r,function(e){t()},function(e){n(e)})},e.prototype.listBottomToolbarItems=function(){return[{icon:"img_bomb@2x_png",title:"炸弹",description:"去掉两个错误答案"},{icon:"img_opportunity@2x_png",title:"机会",description:"多一次机会"},{icon:"img_jump_over@2x_png",title:"跳过",description:"跳过这一题"}]},e.prototype.createQuestions=function(e){return e.map(function(e){return new Question(e)})},e}();__reflect(QuizSceneModel.prototype,"QuizSceneModel");var SQEventCenter=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.sharedInstance=function(){return t.instance||(t.instance=new t),t.instance},t}(egret.EventDispatcher);__reflect(SQEventCenter.prototype,"SQEventCenter");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,n){function r(r){t.call(n,r,e)}if(RES.hasRes(e)){var o=RES.getRes(e);o?r(o):RES.getResAsync(e,r,this)}else RES.getResByUrl(e,r,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Main=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){egret.lifecycle.addLifecycleListener(function(e){e.onUpdate=function(){}}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(e){console.log(e)})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,this.loadPreloadResourceGroup()];case 1:return t.sent(),this.createLaunchGameScene(),[4,this.loadResource()];case 2:return t.sent(),this.goPlayingGame(),[4,platform.login()];case 3:return t.sent(),[4,platform.getUserInfo()];case 4:return e=t.sent(),console.log(e),[2]}})})},t.prototype.loadPreloadResourceGroup=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),e=new LoadingUI,this.stage.addChild(e),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return n.sent(),[4,this.loadTheme()];case 2:return n.sent(),[4,RES.loadGroup("preload",0,e)];case 3:return n.sent(),this.stage.removeChild(e),[3,5];case 4:return t=n.sent(),console.error(t),[3,5];case 5:return[2]}})})},t.prototype.loadTheme=function(){var e=this;return new Promise(function(t,n){var r=new eui.Theme("resource/default.thm.json",e.stage);r.addEventListener(eui.UIEvent.COMPLETE,function(){t()},e)})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,RES.loadGroup("answer")];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),console.error(e),[3,3];case 3:return[2]}})})},t.prototype.createLaunchGameScene=function(){var e=this.createBitmapByName("bg_tu@2x_jpg");this.addChild(e);var t=this.stage.stageWidth,n=this.stage.stageHeight;e.width=t,e.height=n},t.prototype.goPlayingGame=function(){SQSceneManager.sharedInstance().addRootStage(this),SQSceneManager.sharedInstance().pushScene(new QuizScene)},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,n=RES.getRes(e);return t.texture=n,t},t}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var SQApiConfig=function(){function e(){}return e.Host="https://api-staging.shafayouxi.org",e.V1="v1",e}();__reflect(SQApiConfig.prototype,"SQApiConfig");var SQApiErrorType;!function(e){e[e.None=0]="None",e[e.UserNotFound=1]="UserNotFound"}(SQApiErrorType||(SQApiErrorType={}));var SQApiError=function(e){function t(t){var n=e.call(this)||this;return n.message=t.message,"user_not_found"===t.error_type?n.type=SQApiErrorType.UserNotFound:n.type=SQApiErrorType.None,n}return __extends(t,e),t}(Error);__reflect(SQApiError.prototype,"SQApiError");var HttpPost=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.execute=function(e,t,n){var r={url:e.url,header:e.headerFactory.create(),body:e.body};this.postReturnJson(r,function(e){t(e)},function(e){n(e)})},t}(SQApi);__reflect(HttpPost.prototype,"HttpPost",["IHttpAction"]);var AuthorizedHeaderFactory=function(e){function t(t){var n=e.call(this,t)||this;return t.access_token&&(n.header.Authorization="Bearer "+t.access_token),n}return __extends(t,e),t}(NoAuthorizedHeaderFactory);__reflect(AuthorizedHeaderFactory.prototype,"AuthorizedHeaderFactory");var DebugPlatform=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var QuizScene=function(e){function t(){var t=e.call(this)||this;return t.skinName="QuizSceneUI",t.model=new QuizSceneModel,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.fetchQuestions(),this.bottomToolbar.setItems(this.model.listBottomToolbarItems()),this.navigationBar.setLeftButtonTitle("放弃"),this.setupCallbacks()},t.prototype.setupCallbacks=function(){this.navigationBar.pressLeftButtonHandler=this.quitGame.bind(this),this.dashboard.pressAnswerHandler=this.chooseAnswer.bind(this),this.quizFinishedLayer.pressBoringButtonHandler=this.feedbackBoring.bind(this),this.quizFinishedLayer.pressInterestingButtonHandler=this.feedbackInteresting.bind(this),this.quizFinishedLayer.pressContinueHandler=this.next.bind(this)},t.prototype.fetchQuestions=function(){var e=this,t=new SQLoadingLayer;t.show(),this.model.fetchQuestions(function(n){t.hide(),e.showQuestion(e.model.getQuestionAtIndex(e.model.currentQuestionAmount))},function(e){t.hide()})},t.prototype.showQuestion=function(e){this.questionLayer.setCategory(e.category),this.questionLayer.setQuestion(e.text),this.questionLayer.setProgressLabel(this.model.currentQuestionAmount+1+"/"+this.model.totalQuestionAmount),this.dashboard.setAnswers(e.answers)},t.prototype.chooseAnswer=function(e){var t=this,n=new ButtonStateEvent(ButtonStateEvent.ANSWER_CORRECT);if(SQEventCenter.sharedInstance().dispatchEvent(n),e.isCorrect)this.questionLayer.showAnswerCorrectAnimation();else{var r=new ButtonStateEvent(ButtonStateEvent.ANSWER_WRONG);SQEventCenter.sharedInstance().dispatchEvent(r),this.questionLayer.showAnswerWrongAnimation()}var o={question_id:this.model.getQuestionAtIndex(this.model.currentQuestionAmount).id,answer_text:e.name,duration_seconds:5};this.model.postAnswer(o,function(){t.showQuizFinishedLayer()},function(e){console.log("发送回答失败")})},t.prototype.showQuizFinishedLayer=function(){this.dashboardTweenGroup.play(0)},t.prototype.quitGame=function(){console.log("quitGame........")},t.prototype.feedbackBoring=function(){console.log("feedbackBoring...")},t.prototype.feedbackInteresting=function(){console.log("feedbackInteresting....")},t.prototype.next=function(){this.model.currentQuestionAmount+=1;var e=new ButtonStateEvent(ButtonStateEvent.ANSWER_RESET);return SQEventCenter.sharedInstance().dispatchEvent(e),this.dashboardGroup.x=0,this.model.currentQuestionAmount===this.model.totalQuestionAmount?(this.model.reset(),void this.fetchQuestions()):void this.showQuestion(this.model.getQuestionAtIndex(this.model.currentQuestionAmount))},t}(SQScene);__reflect(QuizScene.prototype,"QuizScene");var Answer=function(){function e(e){this.name=e.name,this.isCorrect=e.correct,this.index=e.index}return e}();__reflect(Answer.prototype,"Answer");var Question=function(){function e(e){this.category=e.category,this.id=e.id,this.language=e.language,this.text=e.text,this.answers=this.createAnswers(e.options)}return e.prototype.createAnswers=function(e){return e.map(function(e,t){var n=e;return n.index=t,new Answer(n)})},e}();__reflect(Question.prototype,"Question");var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.onProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var FetchQuestionsData=function(e){function t(t){var n=e.call(this,t)||this;return n.url=SQApiConfig.Host+"/"+SQApiConfig.V1+"/quiz/game/marathon",n.headerFactory=new AuthorizedHeaderFactory({access_token:t.access_token}),n.body.user_id=t.user_id,n}return __extends(t,e),t.prototype.validate=function(e){return this.isLegal=!1,e.access_token?e.user_id?void(this.isLegal=!0):void(this.validateMessage="请提供用户id"):void(this.validateMessage="请传入access_token")},t}(HttpActionData);__reflect(FetchQuestionsData.prototype,"FetchQuestionsData");var PostAnswerData=function(e){function t(t){var n=e.call(this,t)||this;return n.url=SQApiConfig.Host+"/"+SQApiConfig.V1+"/quiz/answer",n.headerFactory=new AuthorizedHeaderFactory({access_token:t.access_token}),n.body.user_id=t.user_id,n.body.question_id=t.question_id,n.body.quiz_token=t.quiz_token,n.body.duration_seconds=t.duration_seconds,n.body.answer=t.answer,n}return __extends(t,e),t.prototype.validate=function(e){this.isLegal=!0},t}(HttpActionData);__reflect(PostAnswerData.prototype,"PostAnswerData");var QuestionLayer=function(e){function t(){var t=e.call(this)||this;return t.skinName="QuestionLayerUI",t}return __extends(t,e),t.prototype.showAnswerCorrectAnimation=function(){var e=this,t=RES.getRes("answer_correct_json"),n=RES.getRes("answer_correct_png"),r=new egret.MovieClipDataFactory(t,n),o=new egret.MovieClip(r.generateMovieClipData("answer_correct"));this.animationContainer.addChild(o);var i=new eui.HorizontalLayout;i.gap=0,i.horizontalAlign=egret.HorizontalAlign.CENTER,i.verticalAlign=egret.VerticalAlign.MIDDLE,this.animationContainer.layout=i,o.gotoAndPlay("play",0),o.addEventListener(egret.MovieClipEvent.COMPLETE,function(){e.animationContainer.removeChild(o)},this)},t.prototype.showAnswerWrongAnimation=function(){var e=this,t=RES.getRes("answer_wrong_json"),n=RES.getRes("answer_wrong_png"),r=new egret.MovieClipDataFactory(t,n),o=new egret.MovieClip(r.generateMovieClipData("answer_wrong"));this.animationContainer.addChild(o);var i=new eui.HorizontalLayout;i.gap=0,i.horizontalAlign=egret.HorizontalAlign.CENTER,i.verticalAlign=egret.VerticalAlign.MIDDLE,this.animationContainer.layout=i,o.gotoAndPlay("play",0),o.addEventListener(egret.MovieClipEvent.COMPLETE,function(){e.animationContainer.removeChild(o)},this)},t.prototype.setCategory=function(e){this.categoryLabel.text=e},t.prototype.setProgressLabel=function(e){this.progressLabel.text=e},t.prototype.setTime=function(e){this.timeLabel.text=e},t.prototype.setQuestion=function(e){this.questionLabel.text=e},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.animationContainer=new eui.Group,this.animationContainer.width=this.width,this.animationContainer.height=this.height,this.animationContainer.y=-140,this.addChild(this.animationContainer)},t}(SQLayer);__reflect(QuestionLayer.prototype,"QuestionLayer");var QuizDashboard=function(e){function t(){var t=e.call(this)||this;return t.skinName="QuizDashboardUI",t.answerOne.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPressAnswerOne,t),t.answerTwo.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPressAnswerTwo,t),t.answerThree.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPressAnswerThree,t),t.answerFour.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPressAnswerFour,t),t}return __extends(t,e),t.prototype.setAnswers=function(e){this.answers=e,this.enableAllButtons(),this.answerOne.setAnswer(e[0]),this.answerTwo.setAnswer(e[1]),this.answerThree.setAnswer(e[2]),this.answerFour.setAnswer(e[3])},t.prototype.onPressAnswerOne=function(){this.disableAllButtons(),this.pressAnswerHandler&&this.pressAnswerHandler(this.answers[0])},t.prototype.onPressAnswerTwo=function(){this.disableAllButtons(),this.pressAnswerHandler&&this.pressAnswerHandler(this.answers[1])},t.prototype.onPressAnswerThree=function(){this.disableAllButtons(),this.pressAnswerHandler&&this.pressAnswerHandler(this.answers[2])},t.prototype.onPressAnswerFour=function(){this.disableAllButtons(),this.pressAnswerHandler&&this.pressAnswerHandler(this.answers[3])},t.prototype.enableAllButtons=function(){this.answerOne.enabled=!0,this.answerTwo.enabled=!0,this.answerThree.enabled=!0,this.answerFour.enabled=!0},t.prototype.disableAllButtons=function(){this.answerOne.enabled=!1,this.answerTwo.enabled=!1,this.answerThree.enabled=!1,this.answerFour.enabled=!1},t}(SQLayer);__reflect(QuizDashboard.prototype,"QuizDashboard");var QuizDashboardButton=function(e){function t(){var t=e.call(this)||this;return t.skinName="QuizDashboardButtonUI",t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.onTapBegin,t),t.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,t.onTapReleaseOutside,t),t.addEventListener(egret.TouchEvent.TOUCH_END,t.onTappEnd,t),t.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onTapped,t),SQEventCenter.sharedInstance().addEventListener(ButtonStateEvent.ANSWER_RESET,t.reset,t),t}return __extends(t,e),t.prototype.setAnswer=function(e){this.answer=e,this.setTitle(e.name),SQEventCenter.sharedInstance().removeEventListener(ButtonStateEvent.ANSWER_CORRECT,this.showCorrectState,this),SQEventCenter.sharedInstance().addEventListener(ButtonStateEvent.ANSWER_CORRECT,this.showCorrectState,this)},t.prototype.showCorrectState=function(){this.answer.isCorrect&&(this.currentState="correct")},t.prototype.showWrongState=function(){this.currentState="wrong"},t.prototype.reset=function(){this.currentState="up",SQEventCenter.sharedInstance().removeEventListener(ButtonStateEvent.ANSWER_WRONG,this.showWrongState,this)},t.prototype.setTitle=function(e){this.titleLabel.text=e},t.prototype.onTapped=function(){SQEventCenter.sharedInstance().addEventListener(ButtonStateEvent.ANSWER_WRONG,this.showWrongState,this)},t.prototype.onTapBegin=function(){this.titleLabel.visible=!1},t.prototype.onTapReleaseOutside=function(){this.titleLabel.visible=!0},t.prototype.onTappEnd=function(){this.titleLabel.visible=!0},t}(eui.Button);__reflect(QuizDashboardButton.prototype,"QuizDashboardButton");var QuizFinishedLayer=function(e){function t(){var t=e.call(this)||this;return t.skinName="QuizFinishedLayerUI",t.interestingButton.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPressInterestingButton,t),t.boringButton.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPressBoringButton,t),t.continueButton.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPressContinueButton,t),t}return __extends(t,e),t.prototype.onPressInterestingButton=function(){this.pressInterestingButtonHandler&&this.pressInterestingButtonHandler()},t.prototype.onPressBoringButton=function(){this.pressBoringButtonHandler&&this.pressBoringButtonHandler()},t.prototype.onPressContinueButton=function(){this.pressContinueHandler&&this.pressContinueHandler()},t}(SQLayer);__reflect(QuizFinishedLayer.prototype,"QuizFinishedLayer");var QuizSceneBottomToolbar=function(e){function t(){var t=e.call(this)||this;return t.skinName="QuizSceneBottomToolbarUI",t.bombButton.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPressBombButton,t),t.chanceButton.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPressChanceButton,t),t.skipButton.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPressSkipButton,t),t}return __extends(t,e),t.prototype.setItems=function(e){if(3===e.length){var t=e[0];this.bombButton.setIcon(t.icon),this.bombButton.setTitle(t.title),this.bombButton.setDescription(t.description);var n=e[1];this.chanceButton.setIcon(n.icon),this.chanceButton.setTitle(n.title),this.chanceButton.setDescription(n.description);var r=e[2];this.skipButton.setIcon(r.icon),this.skipButton.setTitle(r.title),this.skipButton.setDescription(r.description)}},t.prototype.onPressBombButton=function(){},t.prototype.onPressChanceButton=function(){},t.prototype.onPressSkipButton=function(){},t}(SQLayer);__reflect(QuizSceneBottomToolbar.prototype,"QuizSceneBottomToolbar");var QuizSceneBottomToolbarItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="QuizSceneBottomToolbarItemUI",t}return __extends(t,e),t.prototype.setIcon=function(e){this.icon.source=e},t.prototype.setTitle=function(e){this.titleLabel.text=e},t.prototype.setDescription=function(e){this.descriptionLabel.text=e},t}(SQLayer);__reflect(QuizSceneBottomToolbarItem.prototype,"QuizSceneBottomToolbarItem");var UserAttribute=function(){function e(e){this.id="6301af78-a2d5-4f93-b6e2-4e54e537ec9b",this.token="503dc3c3-cd84-4b10-ab97-c4ae664808f3",this.quizToken="cb725ad6-9e98-48f1-a20a-db95b4c2ac49"}return e}();__reflect(UserAttribute.prototype,"UserAttribute",["IAttribute"]);var UserModel=function(){function e(){this.attribute=new UserAttribute({})}return e.sharedInstance=function(){return e.instance||(e.instance=new e),e.instance},e}();__reflect(UserModel.prototype,"UserModel");var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,n,r){function o(e){t.call(r,e)}function i(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),n.call(r))}var s=this;"undefined"!=typeof generateEUI?egret.callLater(function(){t.call(r,generateEUI)},this):"undefined"!=typeof generateEUI2?RES.getResByUrl("resource/gameEui.json",function(e,n){window.JSONParseClass.setData(e),egret.callLater(function(){t.call(r,generateEUI2)},s)},this,RES.ResourceItem.TYPE_JSON):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_TEXT))},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var SQPopupLayer=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(SQLayer);__reflect(SQPopupLayer.prototype,"SQPopupLayer");var ButtonStateEvent=function(e){function t(t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=!1),e.call(this,t,n,r)||this}return __extends(t,e),t.ANSWER_CORRECT="event.button.state.answer.correct",t.ANSWER_WRONG="event.button.state.answer.wrong",t.ANSWER_RESET="event.button.state.answer.reset",t}(egret.Event);__reflect(ButtonStateEvent.prototype,"ButtonStateEvent");var SQSceneManager=function(e){function t(){var t=e.call(this)||this;return t.sceneStack=new eui.ViewStack,t.scenes=[],t}return __extends(t,e),t.sharedInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.addRootStage=function(e){this.rootStage=e,this.rootStage.addChild(this.sceneStack)},t.prototype.addChildLayer=function(e){if(!e)throw new Error("无法添加不存在的layer");this.rootStage.addChild(e),e.onEnter()},t.prototype.removeChildLayer=function(e){if(!e)throw new Error("无法移出不存在的scene");e.parent&&(e.onExit(),this.rootStage.removeChild(e),e=void 0)},t.prototype.pushScene=function(e){if(!e)throw new Error("你不能push一个不存在的scene");this.sceneStack.addChild(e),e.onEnter(),this.scenes.push(e),this.sceneStack.selectedIndex=this.sceneStack.length-1},t.prototype.popScene=function(){if(1<=this.scenes.length){var e=this.scenes.pop();e.onExit();var t=this.sceneStack.removeChild(e);this.sceneStack.selectedIndex=this.sceneStack.length-1,this.sceneStack.selectedIndex<0&&(this.sceneStack.selectedIndex=0),t=void 0}},t.prototype.replaceScene=function(e){if(!e)throw new Error("你不能replace一个不存在的scene");this.popScene(),this.pushScene(e)},t.instance=void 0,t}(egret.DisplayObjectContainer);__reflect(SQSceneManager.prototype,"SQSceneManager");var NavigationBar=function(e){function t(){var t=e.call(this)||this;return t.skinName="NavigationBarUI",t.leftButton.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onPressLeftButton,t),t}return __extends(t,e),t.prototype.setLeftButtonTitle=function(e){this.leftButton.titleLabel.text=e},t.prototype.onPressLeftButton=function(){this.pressLeftButtonHandler&&this.pressLeftButtonHandler()},t}(SQLayer);__reflect(NavigationBar.prototype,"NavigationBar");var PureTextButton=function(e){function t(){var t=e.call(this)||this;return t.skinName="PureTextButtonUI",t}return __extends(t,e),t}(SQLayer);__reflect(PureTextButton.prototype,"PureTextButton");var SQLoadingLayer=function(e){function t(){var t=e.call(this)||this;t.skinName="LoadingLayerUI";var n=RES.getRes("loading_animation_json"),r=RES.getRes("loading_animation_png"),o=new egret.MovieClipDataFactory(n,r);return t.loadingAnimation=new egret.MovieClip(o.generateMovieClipData("loading")),t.addChild(t.loadingAnimation),t.loadingAnimation.x=(t.width-t.loadingAnimation.width)/2,t.loadingAnimation.y=(t.height-t.loadingAnimation.height)/2,t.loadingAnimation.addEventListener(egret.MovieClipEvent.COMPLETE,function(){t.loadingAnimation.gotoAndPlay("loading",0)},t),t}return __extends(t,e),t.prototype.show=function(){this.loadingAnimation.gotoAndPlay("loading",0),SQSceneManager.sharedInstance().addChildLayer(this)},t.prototype.hide=function(){this.loadingAnimation.gotoAndStop(0),this.removeChild(this.loadingAnimation),this.loadingAnimation=void 0,SQSceneManager.sharedInstance().removeChildLayer(this)},t}(SQLayer);__reflect(SQLoadingLayer.prototype,"SQLoadingLayer");var TransparentLayer=function(e){function t(){var t=e.call(this)||this;return t.skinName="TransparentLayerUI",t}return __extends(t,e),t}(SQLayer);__reflect(TransparentLayer.prototype,"TransparentLayer");